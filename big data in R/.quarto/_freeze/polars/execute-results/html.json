{
  "hash": "efa5c7b4d5e0cc12070c1ebfeb16a85e",
  "result": {
    "engine": "knitr",
    "markdown": "# Polars\n\n## [polars](https://docs.pola.rs/)\n\n-   [R polars](https://pola-rs.github.io/r-polars/)\n\n-   [Cookbook Polars for R](https://ddotta.github.io/cookbook-rpolars/)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif(!require(polars))\n    install.packages(\"polars\", repos = \"https://rpolars.r-universe.dev\")\n\npolars_info()\n#> Polars R package version : 0.20.0\n#> Rust Polars crate version: 0.43.1\n#> \n#> Thread pool size: 18 \n#> \n#> Features:                               \n#> default                    TRUE\n#> full_features              TRUE\n#> disable_limit_max_threads  TRUE\n#> nightly                    TRUE\n#> sql                        TRUE\n#> rpolars_debug_print       FALSE\n#> \n#> Code completion: deactivated\npolars_code_completion_activate()\n```\n:::\n\n\n\n\nPolars 的主要函数存储在 “pl” 命名空间中，可以使用 “`pl$`” 前缀进行访问，以防止与其他组件和base R 函数名称冲突\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\niris_polars <- pl$DataFrame(iris)\niris_polars\n#> shape: (150, 5)\n#> ┌──────────────┬─────────────┬──────────────┬─────────────┬───────────┐\n#> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ Species   │\n#> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---       │\n#> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ cat       │\n#> ╞══════════════╪═════════════╪══════════════╪═════════════╪═══════════╡\n#> │ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ setosa    │\n#> │ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ setosa    │\n#> │ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ setosa    │\n#> │ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ setosa    │\n#> │ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ setosa    │\n#> │ …            ┆ …           ┆ …            ┆ …           ┆ …         │\n#> │ 6.7          ┆ 3.0         ┆ 5.2          ┆ 2.3         ┆ virginica │\n#> │ 6.3          ┆ 2.5         ┆ 5.0          ┆ 1.9         ┆ virginica │\n#> │ 6.5          ┆ 3.0         ┆ 5.2          ┆ 2.0         ┆ virginica │\n#> │ 6.2          ┆ 3.4         ┆ 5.4          ┆ 2.3         ┆ virginica │\n#> │ 5.9          ┆ 3.0         ┆ 5.1          ┆ 1.8         ┆ virginica │\n#> └──────────────┴─────────────┴──────────────┴─────────────┴───────────┘\n```\n:::\n\n\n\n\n访问属性\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\niris_polars$shape\n#> [1] 150   5\niris_polars$height\n#> [1] 150\niris_polars$width\n#> [1] 5\n\n# polars syntax\npl$DataFrame(iris)$\n  select(c(\"Sepal.Length\", \"Sepal.Width\", \"Petal.Length\", \"Petal.Width\"))$\n  with_columns(\n    pl$when(\n      (pl$col(\"Petal.Length\") / pl$col(\"Petal.Width\") > 3)\n    )$then(pl$lit(\"long\"))$\n      otherwise(pl$lit(\"large\"))$\n      alias(\"petal_type\")\n  )$\n  filter(pl$col(\"Sepal.Length\")$is_between(4.5, 5.5))$\n  head(6)\n#> shape: (6, 5)\n#> ┌──────────────┬─────────────┬──────────────┬─────────────┬────────────┐\n#> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ petal_type │\n#> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---        │\n#> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ str        │\n#> ╞══════════════╪═════════════╪══════════════╪═════════════╪════════════╡\n#> │ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ long       │\n#> │ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ long       │\n#> │ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ long       │\n#> │ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ long       │\n#> │ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ long       │\n#> │ 5.4          ┆ 3.9         ┆ 1.7          ┆ 0.4         ┆ long       │\n#> └──────────────┴─────────────┴──────────────┴─────────────┴────────────┘\n```\n:::\n\n\n\n\n## [tidypolars](https://tidypolars.etiennebacher.com/)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif(!require(tidypolars))\n    install.packages('tidypolars',\n                     repos = c('https://etiennebacher.r-universe.dev', getOption(\"repos\"))\n    )\n\niris |> \n  as_polars_df() |> \n  select(starts_with(c(\"Sep\", \"Pet\"))) |> \n  mutate(\n    petal_type = ifelse((Petal.Length / Petal.Width) > 3, \"long\", \"large\")\n  ) |> \n  filter(between(Sepal.Length, 4.5, 5.5)) |> \n  head()\n#> shape: (6, 5)\n#> ┌──────────────┬─────────────┬──────────────┬─────────────┬────────────┐\n#> │ Sepal.Length ┆ Sepal.Width ┆ Petal.Length ┆ Petal.Width ┆ petal_type │\n#> │ ---          ┆ ---         ┆ ---          ┆ ---         ┆ ---        │\n#> │ f64          ┆ f64         ┆ f64          ┆ f64         ┆ str        │\n#> ╞══════════════╪═════════════╪══════════════╪═════════════╪════════════╡\n#> │ 5.1          ┆ 3.5         ┆ 1.4          ┆ 0.2         ┆ long       │\n#> │ 4.9          ┆ 3.0         ┆ 1.4          ┆ 0.2         ┆ long       │\n#> │ 4.7          ┆ 3.2         ┆ 1.3          ┆ 0.2         ┆ long       │\n#> │ 4.6          ┆ 3.1         ┆ 1.5          ┆ 0.2         ┆ long       │\n#> │ 5.0          ┆ 3.6         ┆ 1.4          ┆ 0.2         ┆ long       │\n#> │ 5.4          ┆ 3.9         ┆ 1.7          ┆ 0.4         ┆ long       │\n#> └──────────────┴─────────────┴──────────────┴─────────────┴────────────┘\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}